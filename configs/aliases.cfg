

// do_endmatch and do_restart
alias do_endmatch_1 "endmatch"
alias do_endmatch_0 "echo NOTE: Still initializing"
alias do_endmatch "do_endmatch_${_done_initializing}"

alias do_restart_1 "restart"
alias do_restart_0 "echo NOTE: Still initializing"
alias do_restart "do_restart_${_done_initializing}"


// reset aliases

alias reload_config "exec \"$serverconfig\""

alias _save_state "set _state_serverconfig \"$serverconfig\"; set _state_sv_public \"${sv_public}\"; set _state_sv_eventlog \"${sv_eventlog}\""
alias _restore_state "set serverconfig \"${_state_serverconfig}\"; set sv_public \"${_state_sv_public}\"; set sv_eventlog \"${_state_sv_eventlog}\""
alias _mydefault "exec \"configs/auth.cfg\"; exec \"configs/common.cfg\"; exec \"configs/vars.cfg\""

alias _custom_reset "_save_state; exec \"${* ?}\"; _restore_state; _mydefault"

alias reset_default "_custom_reset defaultXonotic.cfg"
alias reset_xpm "_custom_reset defaultXPM.cfg"

alias update_votes "sv_vote_commands \"${_basic_votes} ${_modes_votes} ${_extra_votes}\""

// =====================
// Aliases for voting
// =====================
alias autocap_on "g_ctf_dropped_capture_radius 100;say ^2 Flags will capture themselves."
alias autocap_off "g_ctf_dropped_capture_radius 0;say ^2 Flags ^1won't ^2capture themselves."
alias teambalance "toggle g_balance_teams; toggle g_balance_teams_prevent_imbalance"
alias 1on1 "g_maxplayers 2"
alias 2on2 "g_maxplayers 4"
alias 3on3 "g_maxplayers 6"
alias 4on4 "g_maxplayers 8"
alias 5on5 "g_maxplayers 10"
alias allplayers "g_maxplayers 0"
alias speedcap_on 	"g_ctf_reverse 1;g_start_delay 0;g_balance_kill_delay 0;timelimit_override 0;g_ctf_flag_return_time -1;g_ctf_capture_limit 0;capturelimit_override 0; g_maxplayers 1; do_restart;say ^2Speedcap mode for CTF started. Please vote ^1speedcap_off ^2to get back to normal CTF"

alias speedcap_off	"g_ctf_reverse 0;g_start_delay 10;g_balance_kill_delay 3;g_maxplayers 8;timelimit_override 20;g_ctf_flag_return_time 15;g_ctf_capture_limit 10;capturelimit_override 10; do_restart;say ^2Speedcap mode for CTF stopped;"

// speedcap only for one match
alias speedcaps "settemp g_ctf_reverse 1; settemp g_balance_kill_delay 0; timelimit 120; settemp g_ctf_flag_return_time -1; fraglimit 120; settemp g_maxplayers 1; say ^2Speedcaps enabled for this match!"


alias taunts_off  "sv_taunt 0; sv_autotaunt 0;"
alias taunts_on  "sv_taunt 1; sv_autotaunt 1;"

alias enable_teamkill "g_mirrordamage_virtual 1; teamplay_mode 2; g_instagib_mirrordamage 0;"
alias disable_teamkill "g_mirrordamage_virtual 0; teamplay_mode 4; g_instagib_mirrordamage 1;"

alias teamkill "enable_teamkill; say ^3Friendly fire is ^1ON!"
alias noteamkill "disable_teamkill; say ^3Friendly fire is ^2OFF!"


// game modes

alias _regulars_settings "exec configs/regulars-balance.cfg; exec configs/regulars-physics.cfg"
alias _regulars_vote "reset_default; _regulars_settings; exec \"configs/modes/${1}.cfg\"; update_votes; do_endmatch"

// insta votes
alias insta_ctf   "_regulars_vote insta_ctf"
alias insta_dm    "_regulars_vote insta_dm"
alias insta_duel  "_regulars_vote insta_duel"
alias insta_tdm   "_regulars_vote insta_tdm"
alias insta_kh    "_regulars_vote insta_kh"

// vanilla votes
alias vanilla_dm "reset_xpm; exec configs/modes/vanilla_dm.cfg; update_votes; do_endmatch"
